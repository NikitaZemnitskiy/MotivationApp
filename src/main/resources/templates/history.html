<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title th:text="${user.displayName} + ' — История'">History</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<div th:replace="fragments/header :: headerFragment"></div>

<main class="p-6 max-w-4xl mx-auto">

    <section class="bg-white rounded-xl shadow p-4">
        <h2 class="text-xl font-bold text-indigo-600 mb-4">История событий</h2>

        <div th:if="${#lists.isEmpty(historyList)}" class="text-gray-500 italic">
            История пуста
        </div>

        <div th:each="entry : ${historyList}" class="mb-3 p-3 border rounded flex justify-between items-center hover:bg-gray-50 transition">
            <div>
                <p class="font-semibold text-gray-800" th:text="${entry.reason}">Reason</p>
                <span class="text-gray-500 text-sm"
                      th:text="${#temporals.format(entry.timestamp, 'dd.MM.yyyy HH:mm')}">Date</span>
            </div>
            <div>
                <span th:class="${entry.amount > -1} ? 'text-green-600 font-bold' : 'text-red-600 font-bold'"
                      th:text="${entry.amount > -1 ? '+' + entry.amount : entry.amount}">+0</span>
                <span th:if="${entry.isDaily}" class="ml-2 text-xs text-blue-600">Ежедневное</span>
            </div>
        </div>

    </section>

</main>

</body>
</html>
